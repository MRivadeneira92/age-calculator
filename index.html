<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- displays site properly based on user's device -->

  <link rel="icon" type="image/png" sizes="32x32" href="./assets/images/favicon-32x32.png">
  
  <title>Frontend Mentor | Age calculator app</title>
  <link rel="stylesheet" href="./style.css">
  <!-- Feel free to remove these styles or customise in your own stylesheet 👍 -->
</head>
<body>

  <div class="container">
    <div class="input-container">
      <div class="num-container" id="container-day">
        <p>DAY</p>
        <input type="number" placeholder="DD" id="input-day">
        <p class="error-message" id="error-day">Must be a valid day</p>
      </div>
      <div class="num-container" id="container-month">
        <p>MONTH</p>
        <input type="number" placeholder="MM" id="input-month">
        <p class="error-message" id="error-month">Must be a valid month</p>
      </div>
      <div class="num-container" id="container-year">
        <p>YEAR</p>
        <input type="number" placeholder="YYYY" id="input-year">
        <p class="error-message" id="error-year">Must be in the past</p>
      </div>
    </div>
    <div class="line-button">
      <hr>
      <button type="button" id="button-calc"><img src="./assets/images/icon-arrow.svg" alt="button"></button>
    </div>
    <div class="result">
      <div class="result-num">
        <p id="result-years" class="result-digit">--</p>
        <p>years</p>
      </div>
      <div class="result-num">
        <p id="result-month" class="result-digit">--</p>
        <p>months</p>
      </div>
      <div class="result-num">
        <p id="result-days" class="result-digit">--</p>
        <p>days</p>
      </div>
    </div>
  </div>
  <div class="attribution">
    Challenge by <a href="https://www.frontendmentor.io?ref=challenge" target="_blank">Frontend Mentor</a>. 
    Coded by <a href="#">Your Name Here</a>.
  </div>
</body>
<script>  
  let inputDay = document.getElementById("input-day");
  let inputMonth = document.getElementById("input-month");
  let inputYear = document.getElementById("input-year");
  let btnCalc = document.getElementById("button-calc");
  let inputError = false; 
  let inputPass = false; // True when the button was pressed for the first time and an error showed up

  btnCalc.addEventListener("click", function(e) {
    inputDay = document.getElementById("input-day").value;
    inputMonth = document.getElementById("input-month").value;
    inputYear = document.getElementById("input-year").value;
    if (inputDay == "") {
      errorEmply("day");
      errorShow("day");
      inputError = true;
    }
    if (inputMonth == "") {
      errorEmply("month");
      errorShow("month");
      inputError = true;
    }
    if (inputYear == "") {
      errorEmply("year");
      errorShow("year");
      inputError = true;
    }

    if (inputDay >= 32) {
      document.getElementById("error-day").innerHTML = "Must be a valid day";
      document.getElementById("input-day").classList.add("error-input");
      errorShow("day");
      inputError = true;
    }

    dayCalc(inputDay, inputMonth);

    if (inputMonth >= 13 || inputMonth <= 0 && inputMonth != "") {
      document.getElementById("error-month").innerHTML = "Must be a valid month";
      document.getElementById("input-month").classList.add("error-input");
      errorShow("month");
      inputError = true;
    }
    
    if (inputYear > 2023 ) {
      document.getElementById("error-year").innerHTML = "Must be in the past";
      errorShow("year");
      inputError = true;
    }

    if (inputError == true) {
      document.getElementById("container-day").classList.add("error");
      document.getElementById("container-year").classList.add("error");
      document.getElementById("container-month").classList.add("error");
      document.getElementById("input-day").classList.add("error-input");
      document.getElementById("input-month").classList.add("error-input");
      document.getElementById("input-year").classList.add("error-input");
      inputPass = true;
    }

    if (inputError == false && inputPass == true) {
      document.getElementById("container-day").classList.remove("error");
      document.getElementById("container-year").classList.remove("error");
      document.getElementById("container-month").classList.remove("error");
      document.getElementById("input-day").classList.remove("error-input");
      document.getElementById("input-month").classList.remove("error-input");
      document.getElementById("input-year").classList.remove("error-input");
      document.getElementById("error-day").style.display = "none";
      document.getElementById("error-month").style.display = "none";
      document.getElementById("error-year").style.display = "none";
      inputPass = false;
    }

    inputError = false;
  });

  function errorShow(date) {
    document.getElementById("error-" + date).style.display = "block";
  }
  function errorEmply(date) {
    document.getElementById("error-"+ date).innerHTML = "This field is required";
  }

  function dayCalc(day,month) {
    if (month == 4 || month == 6  || month == 9 || month == 11 && day >= 31) {
      document.getElementById("container-day").classList.add("error");
      document.getElementById("input-day").classList.add("error-input");
      document.getElementById("error-day").innerHTML = "Must be a valid day";
      inputError = true;
    }
    if (month == 2 && day >= 29) {
      document.getElementById("container-day").classList.add("error");
      document.getElementById("input-day").classList.add("error-input");
      document.getElementById("error-day").innerHTML = "Must be a valid day";
      inputError = true;
    }
  }

</script>
</html>